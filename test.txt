To test the end-to-end flow of the summarizer + database:
`docker-compose up --build db redis summarizer_svc`

Then in another terminal, run the following commands to simulate a call and check the results:
============== VERIFY DATA IS SEEDED ==============
docker exec -it td_db psql -U postgres -d td_poc -c "SELECT * FROM customer;"
docker exec -it td_db psql -U postgres -d td_poc -c "SELECT * FROM promotion;"
============== CREATE A NEW CALL ==============
docker exec -it td_redis redis-cli SADD active_calls "call_123"
docker exec -it td_redis redis-cli SET "call:call_123:customer_id" "1"
============== ADD TRANSCRIPT CHUNKS ==============
docker exec -it td_redis redis-cli RPUSH "call:call_123:chunks" "Agent: Hello, how can I help you today?"
docker exec -it td_redis redis-cli RPUSH "call:call_123:chunks" "Customer: I have a question about my credit card."
docker exec -it td_redis redis-cli RPUSH "call:call_123:chunks" "Agent: Sure, I can help with that."
docker exec -it td_redis redis-cli RPUSH "call:call_123:chunks" "Customer: There is a charge for 150 dollars I dont recognize."
============== CHECK REDIS STATE ==============
docker exec -it td_redis redis-cli KEYS "*"
docker exec -it td_redis redis-cli SMEMBERS active_calls
docker exec -it td_redis redis-cli LRANGE "call:call_123:chunks" 0 -1
============== WAIT FOR WORKER (5-10 seconds) ==============
============== CHECK SUMMARY ==============
curl http://localhost:8002/summary/call_123
============== CHECK PROMOTIONS ==============
curl http://localhost:8002/promotions/call_123
============== HEALTH CHECK ==============
curl http://localhost:8002/health
============== SAVE TO DATABASE ==============
curl -X POST http://localhost:8002/save_summary -H "Content-Type: application/json" -d "{\"call_id\": \"call_123\", \"customer_id\": 1, \"summary\": \"Customer reported unrecognized $150 charge.\"}"
============== VERIFY SAVED IN POSTGRES ==============
docker exec -it td_db psql -U postgres -d td_poc -c "SELECT * FROM interaction;"
============== VERIFY REDIS CLEANUP ==============
docker exec -it td_redis redis-cli SMEMBERS active_calls
docker exec -it td_redis redis-cli GET "call:call_123:summary"
